---
import '../assets/css/input.css';

import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import ConstructionBanner from "../components/ConstructionBanner.astro";

interface Props {
    title?: string;
    description?: string;
    tableOfContents?: boolean;
    image?: string;
}

const {
    title = "htmx",
    description = "htmx gives you access to AJAX, CSS Transitions, WebSockets and Server Sent Events directly in HTML, using attributes, so you can build modern user interfaces with the simplicity and power of hypertext\n\nhtmx is small (~10k min.gz'd), dependency-free, extendable, IE11 compatible & has reduced code base sizes by 67% when compared with react",
    tableOfContents = false,
    image = "/img/og-image.png" // Default social image
} = Astro.props;

const navigation = [
    { name: "docs", href: "/guides/docs", title: "Read the complete documentation and tutorials" },
    { name: "reference", href: "/reference", title: "Browse the full API reference" },
    { name: "patterns", href: "/patterns", title: "Explore common UI patterns and examples" },
    { name: "about", href: "/about/", title: "About htmx and the team" },
    {
        name: "community",
        title: "Join the htmx community",
        dropdown: [
            { name: "Essays", href: "/essays/", icon: "pixel:newspaper-solid", title: "Read essays about htmx and hypermedia" },
            { name: "GitHub", href: "https://github.com/bigskysoftware/htmx", icon: "pixel:github", title: "View source code and contribute on GitHub" },
            { name: "Discord", href: "/discord", icon: "pixel:discord", title: "Join 1.4K developers on Discord" },
            { name: "@htmx_org", href: "https://x.com/htmx_org", icon: "dinkie-icons:twitter-alt-small", title: "Follow @htmx_org on X (Twitter)" },
            { name: "Book", href: "https://hypermedia.systems", icon: "dinkie-icons:closed-book-filled", title: "Read the Hypermedia Systems book" },
            { name: "RSS", href: "/atom.xml", icon: "pixel:rss", title: "Subscribe to the RSS feed" },
        ]
    },
];

const footer = [
    {
        title: "Haiku",
        content: `javascript fatigue:<br>longing for a hypertext<br>already in hand`
    },
    {
        title: "Links",
        items: [
            navigation[0], // guides
            navigation[1], // reference
            navigation[2], // patterns
            navigation[4]  // about
        ]
    },
    {
        title: "Community",
        items: navigation[3].dropdown
    }
]
---

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{title}</title>

    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

    <!-- SEO & Page Meta -->
    <meta name="description" content={description.trim()}>
    <meta name="keywords" content="htmx, hypermedia, ajax, html, javascript, frontend, web development, hateoas, rest, websockets, server sent events, declarative">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Big Sky Software">
    <meta name="generator" content="Astro">

    <!-- Sitemap -->
    <link rel="sitemap" href="/sitemap-index.xml">

    <!-- Security -->
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <!-- Prevents iOS from turning version numbers (e.g. 2.0.0) into phone links -->
    <meta name="format-detection" content="telephone=no">

    <!-- Theme Colors -->
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#171717" media="(prefers-color-scheme: dark)">

    {Astro.url && <link rel="canonical" href={Astro.url.href}>}

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:url" content={Astro.url}>
    <meta property="og:title" content={title}>
    <meta property="og:description" content={description.trim()}>
    <meta property="og:image" content={new URL(image, Astro.url)}>

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@htmx_org">
    <meta name="twitter:title" content={title}>
    <meta name="twitter:description" content={description.trim()}>
    <meta name="twitter:image" content={new URL(image, Astro.url)}>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">

    <!-- RSS Feed -->
    <link rel="alternate" type="application/atom+xml" title="Sitewide Atom feed" href="/atom.xml">

    <!-- htmx & extensions -->
    <script is:inline src="/js/htmx.min.js"></script>
    <script src="../../../dist/ext/hx-preload.js"></script>
    <meta name="htmx:config" content='{"extensions":"preload"}'>

    <!-- _hyperscript -->
    <script is:inline src="/js/_hyperscript.min.js"></script>
    <script is:inline type="text/hyperscript">
        // Ensure content loaded by htmx is processed by _hyperscript
        on htmx:after:process from document call _hyperscript.processNode(document.body)
    </script>

    <!-- <iconify-icon> web component -->
    <script is:inline src="https://cdn.jsdelivr.net/npm/iconify-icon@3.0.0/dist/iconify-icon.min.js"></script>
</head>

<body hx-boost:inherited="true"
      class="group/body font-hyperlegible text-neutral-900 dark:text-neutral-100 bg-white dark:bg-neutral-900 transition overflow-x-hidden"
      data-toc={tableOfContents}
>

<Header {navigation} />

<ConstructionBanner href="/htmx-4" />

<div class:list={["max-w-[1680px] mx-auto px-4 sm:px-8 mt-16 mb-8 sm:mt-20 sm:mb-16 min-w-0", {"lg:flex lg:justify-center lg:gap-12": tableOfContents}]}>
    {tableOfContents && (
            <slot name="toc">
                <!-- Table of Contents goes here -->
            </slot>
    )}
    <main class:list={[
        "prose dark:prose-invert sm:prose-lg prose-h1:text-4xl prose-a:no-underline prose-a:hover:underline prose-code:before:content-none prose-code:after:content-none [&_:is(h1,h2,h3,h4,h5,h6)]:scroll-mt-28 lg:[&_:is(h1,h2,h3,h4,h5,h6)]:scroll-mt-36",
        {
            "lg:flex-1 prose-a:[:is(h1,h2,h3,h4,h5,h6)_&]:text-neutral-800 dark:prose-a:[:is(h1,h2,h3,h4,h5,h6)_&]:text-neutral-200": tableOfContents,
            "mx-auto": !tableOfContents
        }
    ]}>
        <slot>
            <!-- Page content goes here -->
        </slot>
    </main>
</div>

<Footer {footer} />

</body>
</html>